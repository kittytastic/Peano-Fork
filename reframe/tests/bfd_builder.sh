. spack/share/spack/setup-env.sh; spack load gcc@9.3.0; rm -rf smartmpi_bfd; git clone git@gitlab.lrz.de:hpcsoftware/smartmpi.git smartmpi_bfd; pushd smartmpi_bfd; git checkout master; git pull; libtoolize; aclocal; autoconf; autoheader; cp src/config.h.in .; automake --add-missing; ./configure --with-mpi={mpi_comp} CXXFLAGS="-std=c++17 -DnoMPISupportsSingleSidedCommunication"; make -j; popd; rm -rf Peano_bfd; git clone https://gitlab.lrz.de/hpcsoftware/Peano.git Peano_bfd; pushd Peano_bfd; git checkout {test.git_rev}; git clean -x -f -d; libtoolize; aclocal; autoconf; autoheader; cp src/config.h.in .; automake --add-missing; ./configure CXX="g++" --enable-blockstructured --enable-exahype --enable-loadbalancing --with-multithreading=omp CXXFLAGS="-fopenmp -std=c++17 -DnoMPISupportsSingleSidedCommunication -I$PWD/../smartmpi/src" --with-mpi={mpi_comp} --with-smartmpi={topology} LDFLAGS=-L$PWD/../smartmpi_bfd/src; make -j10; popd
