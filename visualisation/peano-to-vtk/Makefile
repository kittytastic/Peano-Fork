# This is a makefile for Peano's Multigrid component
# generated by the Peano Development Tools (PDT) 

ifeq ($(VTK_INCLUDE),)
  $(error "ERROR: Environment variable VTK_INCLUDE not set (usually something alike /usr/include/vtk-8.1)")
endif

ifeq ($(VTK_LIB),)
  $(error "ERROR: Environment variable VTK_LIB not set (usually /usr/lib64)")
endif



# Include files
SOURCES = Convert.cpp  PeanoConverter.cpp  PeanoDataSet.cpp  PeanoMetaFile.cpp  PeanoPatch.cpp  PeanoPatchData.cpp  PeanoReader.cpp  PeanoVariable.cpp


# Configure System
# ----------------
# These values are used to assemble the symbols SYSTEM_CFLAGS and SYSTEM_LFLAGS.
INCLUDE_OMP=-fopenmp
LINK_OMP=-fopenmp


default: header
	@echo Peano block file to VTK converter
	@echo \(C\) 2018 Dan Tuthill-Jones, Tobias Weinzierl
	@echo
	@echo Please specify your target:
	@echo clean
	@echo build-gcc


EXECUTABLE=peano-to-vtk


build-gcc: CC=g++ -std=c++0x
build-gcc: CFLAGS=
build-gcc: LFLAGS=
build-gcc: header build


#
# Linker Settings
# ---------------
# By default, I use the compiler command. But you might wanna modify it.
LL=$(CC)


OBJECTS=$(SOURCES:.cpp=.o)


all: header build


header:
	@echo  --- This is Peano 3 ---


build: $(OBJECTS)
	$(LL) $(OBJECTS) -L$(VTK_LIB) -o $(EXECUTABLE) $(LFLAGS) -lvtkIOXML -lvtkCommonExecutionModel -lvtkCommonCore -lvtkCommonDataModel -lvtkFiltersCore
	@echo
	@echo build of Peano file converter successful
	@echo visit Peano\'s homepage at http://www.peano-framework.org


clean:
	rm -f $(EXECUTABLE)
	rm -f $(OBJECTS)
	rm -f files.mk


$(OBJECTS): %.o : %.cpp
	$(CC)  -I$(VTK_INCLUDE)  -c $< -o $@
