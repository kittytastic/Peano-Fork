#include "peano4/utils/Globals.h"

Packed-Type: short int;

Constant: Dimensions hint-value 4;
Constant: TwoPowerD;


class peano4::grid::GridVertex {
  enum State {
    HangingVertex,Unrefined,Refined,RefinementTriggered,
    Refining,EraseTriggered,Erasing
  };
  
  persistent parallelise packed State  state;
  persistent parallelise int  adjacentRanks[TwoPowerD];
  discard    int  adjacentRanksOfPreviousIteration[TwoPowerD];

  /**
   * A vertex is outside, if all @f$ 2^d @f$ adjacent cells are outside. In this
   * case, no events are called for it. 
   */
  #ifdef PeanoDebug
  persistent parallelise double  x[Dimensions];
  persistent parallelise int     level;
  #endif
};
