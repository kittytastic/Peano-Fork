#include "peano4/utils/Globals.h"

// have to know whether we are using MPI
#include "config.h"

Packed-Type: short int;

Constant: Dimensions hint-value 4;
Constant: DimensionsTimesTwo;
Constant: TwoPowerD;


class peano4::grid::AutomatonState {
  persistent parallelise int        level;
  persistent parallelise double     x[Dimensions];
  persistent parallelise double     h[Dimensions];

  persistent packed bool inverted;

  /**
   * Defines whether this event belongs to an even column, row, plate etc.
   * There is no need to exchange this data throughout the iterations or 
   * even a join.
   */
  persistent packed bool evenFlags[Dimensions];

  /**
   * Identifies when the corresponding face is touched again. Negative values
   * mean, this face has been touched before, positive values say this face
   * will be touched later on.
   * There is no need to exchange this data throughout the iterations or 
   * even a join.
   *
   * We should use TwoPowerD here instead of the fixed numbers, but that is 
   * currently not supported by DaStGen. So we are prepared for four dimensions
   * but can't do 5d.
   */
//  persistent packed short int accessNumber[DimensionsTimesTwo] from -16 to 16;
  persistent packed short int accessNumber[DimensionsTimesTwo] from -8 to 8;
};
